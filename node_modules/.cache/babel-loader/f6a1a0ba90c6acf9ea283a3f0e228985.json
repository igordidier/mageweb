{"ast":null,"code":"var _jsxFileName = \"/Users/igor/Documents/mage-template/src/layouts/dashboard/project.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect, useRef } from \"react\";\nimport { onSnapshot, collection, getDoc, addDoc, updateDoc, deleteDoc, where, doc, query, getDocs } from \"firebase/firestore\";\nimport Tasks from \"./task\";\nimport \"./dash.css\";\nimport { db } from \"../../firebase.js\";\nimport { useHistory, useParams } from \"react-router\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst deleteChangeHandler = async id => {\n  const docRef = doc(db, \"tasks\", id);\n  await deleteDoc(docRef); // INITIAL_TODO = INITIAL_TODO.filter((item) => item.task !== deleteTask);\n  // setNewTodo(INITIAL_TODO);\n};\n\nconst projdeleteChangeHandler = async id => {\n  const docRef = doc(db, \"projects\", id);\n  await deleteDoc(docRef); // INITIAL_TODO = INITIAL_TODO.filter((item) => item.task !== deleteTask);\n  // setNewTodo(INITIAL_TODO);\n};\n\nconst Project = () => {\n  _s();\n\n  const projdeleteHandler = () => {\n    projects.onDelete(projects.id);\n  }; // const [task, settask] = useState(\"\");\n\n\n  const [projcolor, setprojcolor] = useState(\"\");\n  const [tasks, settasks] = useState([]);\n  const taskInputRef = useRef(null);\n  const taskCollectionRef = collection(db, \"tasks\"); // useEffect(\n  //   () =>\n  //     onSnapshot(collection(db, \"tasks\"), where(\"projid\", \"==\", id), function (\n  //       snapshot\n  //     ): void {\n  //       return settasks(\n  //         snapshot.docs.map((doc) => ({ ...doc.data(), id: doc.id }))\n  //       );\n  //     }),\n  //   []\n  // );\n\n  const [showActionSheet, setShowActionSheet] = useState(false);\n\n  const pushtask = async () => {\n    const msg = project === null || project === void 0 ? void 0 : project.color; // console.log(msg);\n\n    await addDoc(taskCollectionRef, {\n      task: task,\n      projid: id,\n      projcolor: msg\n    });\n  };\n\n  const [isOpen, setIsOpen] = useState(false);\n  const [projects, setProjects] = useState([]);\n  const params = useParams();\n  const id = params === null || params === void 0 ? void 0 : params.id;\n  const [project, setProject] = useState();\n\n  const myfun = async () => {\n    const docRef = await doc(db, \"projects\", id);\n    const docSnap = await getDoc(docRef);\n    setProject(docSnap.data());\n    console.log(id);\n    const q = query(collection(db, \"tasks\"), where(\"projid\", \"==\", id));\n    const querySnapshot = await getDocs(q);\n    console.log(\"mee\", tasks);\n    var myTasks = [];\n    querySnapshot.forEach(doc => {\n      // console.log(doc.id, \" => \", doc.data());\n      myTasks.push(doc.data());\n    });\n    settasks(myTasks);\n  };\n\n  console.log(tasks);\n\n  const deleteproj = async () => {\n    const docRef = doc(db, \"projects\", id);\n    await deleteDoc(docRef);\n    setProject(docSnap.data());\n  };\n\n  useEffect(() => {\n    myfun();\n  }, [id]); // console.log(project);\n  // console.log(\"id:\", id);\n\n  return /*#__PURE__*/_jsxDEV(DashboardLayout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ion-padding\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"iontitle\",\n            children: project === null || project === void 0 ? void 0 : project.projtitle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Objectif :\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\" \", project === null || project === void 0 ? void 0 : project.des, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Task To Do\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: tasks.map(tasks => /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(Tasks, {\n                id: tasks.id,\n                task: tasks.task,\n                projid: tasks.projid,\n                projcolor: tasks.projcolor,\n                onDelete: deleteChangeHandler\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 17\n              }, this)\n            }, tasks.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 15\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ion-padding\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: [\"Add task \", project === null || project === void 0 ? void 0 : project.color]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              position: \"floating\",\n              children: \"Task\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              ref: taskInputRef,\n              onIonChange: e => settask(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: pushtask,\n            className: \"ion-margin-top\",\n            expand: \"block\",\n            children: \"Add\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Project, \"QKJLQmI7aPKP7o84NK5GTn7twN0=\", false, function () {\n  return [useParams];\n});\n\n_c = Project;\nexport default Project;\n\nvar _c;\n\n$RefreshReg$(_c, \"Project\");","map":{"version":3,"names":["useState","useEffect","useRef","onSnapshot","collection","getDoc","addDoc","updateDoc","deleteDoc","where","doc","query","getDocs","Tasks","db","useHistory","useParams","deleteChangeHandler","id","docRef","projdeleteChangeHandler","Project","projdeleteHandler","projects","onDelete","projcolor","setprojcolor","tasks","settasks","taskInputRef","taskCollectionRef","showActionSheet","setShowActionSheet","pushtask","msg","project","color","task","projid","isOpen","setIsOpen","setProjects","params","setProject","myfun","docSnap","data","console","log","q","querySnapshot","myTasks","forEach","push","deleteproj","projtitle","des","map","e","settask","target","value"],"sources":["/Users/igor/Documents/mage-template/src/layouts/dashboard/project.js"],"sourcesContent":["import  { useState, useEffect, useRef } from \"react\";\n\nimport {\n  onSnapshot,\n  collection,\n  getDoc,\n  addDoc,\n  updateDoc,\n  deleteDoc,\n  where,\n  doc,\n  query,\n  getDocs\n} from \"firebase/firestore\";\nimport Tasks from \"./task\";\nimport \"./dash.css\";\n\nimport { db } from \"../../firebase.js\";\nimport { useHistory, useParams } from \"react-router\";\n\n\n\n\n\nconst deleteChangeHandler = async (id: any) => {\n  const docRef = doc(db, \"tasks\", id);\n  await deleteDoc(docRef);\n  // INITIAL_TODO = INITIAL_TODO.filter((item) => item.task !== deleteTask);\n  // setNewTodo(INITIAL_TODO);\n};\nconst projdeleteChangeHandler = async (id: any) => {\n  const docRef = doc(db, \"projects\", id);\n  await deleteDoc(docRef);\n  // INITIAL_TODO = INITIAL_TODO.filter((item) => item.task !== deleteTask);\n  // setNewTodo(INITIAL_TODO);\n};\n\nconst Project: React.FC<{\n  onDelete: Function;\n}> = () => {\n  const projdeleteHandler = () => {\n    projects.onDelete(projects.id);\n  };\n\n  // const [task, settask] = useState(\"\");\n  const [projcolor, setprojcolor] = useState(\"\");\n\n  const [tasks, settasks] = useState([]);\n  const taskInputRef = useRef(null);\n  const taskCollectionRef = collection(db, \"tasks\");\n\n  // useEffect(\n  //   () =>\n  //     onSnapshot(collection(db, \"tasks\"), where(\"projid\", \"==\", id), function (\n  //       snapshot\n  //     ): void {\n  //       return settasks(\n  //         snapshot.docs.map((doc) => ({ ...doc.data(), id: doc.id }))\n  //       );\n  //     }),\n  //   []\n  // );\n  const [showActionSheet, setShowActionSheet] = useState(false);\n  const pushtask = async () => {\n\n\n    const msg = project?.color;\n    // console.log(msg);\n    await addDoc(taskCollectionRef, {\n      task: task,\n      projid: id,\n      projcolor: msg\n    });\n  };\n\n  const [isOpen, setIsOpen] = useState(false);\n  const [projects, setProjects] = useState([] );\n  const params = useParams();\n  const id = params?.id;\n\n  const [project, setProject] = useState();\n  const myfun = async () => {\n    const docRef = await doc(db, \"projects\", id);\n    const docSnap = await getDoc(docRef);\n    setProject(docSnap.data());\n    console.log(id);\n    const q = query(collection(db, \"tasks\"), where(\"projid\", \"==\", id));\n    const querySnapshot = await getDocs(q);\n    console.log(\"mee\", tasks);\n    var myTasks = [];\n    querySnapshot.forEach((doc) => {\n      // console.log(doc.id, \" => \", doc.data());\n      myTasks.push(doc.data());\n    });\n    settasks(myTasks);\n  };\n  console.log(tasks);\n  const deleteproj = async () => {\n    const docRef = doc(db, \"projects\", id);\n    await deleteDoc(docRef);\n    setProject(docSnap.data());\n  };\n\n  useEffect(() => {\n    myfun();\n  }, [id]);\n  // console.log(project);\n  // console.log(\"id:\", id);\n\n  return (\n  <DashboardLayout>\n    <div>\n      <div>\n        <div>\n\n\n\n        </div>\n      </div>\n\n\n      <div>\n        <br />\n\n        <div className=\"ion-padding\">\n          <h3 className=\"iontitle\">{project?.projtitle}</h3>\n          <br />\n          <label>Objectif :</label>\n          <br />\n          <br />\n          <p> {project?.des} </p>\n          <br />\n          <h4>Task To Do</h4>\n\n          <div>\n            {tasks.map((tasks: any) => (\n              <div key={tasks.id}>\n                <Tasks\n                  id={tasks.id}\n                  task={tasks.task}\n                  projid={tasks.projid}\n                  projcolor={tasks.projcolor}\n                  onDelete={deleteChangeHandler}\n                />\n              </div>\n            ))}\n          </div>\n        </div>\n\n\n\n          <div className=\"ion-padding\">\n            <h4>Add task {project?.color}</h4>\n            <div>\n              <label position=\"floating\">Task</label>\n              <input\n                ref={taskInputRef}\n                onIonChange={(e: any) => settask(e.target.value)}\n              />\n            </div>\n            <button\n              onClick={pushtask}\n              className=\"ion-margin-top\"\n              expand=\"block\"\n            >\n              Add\n            </button>\n          </div>\n\n      </div>\n    </div>\n  </DashboardLayout>  \n  );\n};\n\nexport default Project;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}