{"ast":null,"code":"var _jsxFileName = \"/Users/igor/Documents/mage-template/src/layouts/dashboard/project.js\",\n    _s = $RefreshSig$();\n\nimport { onSnapshot, collection, getDoc, addDoc, updateDoc, deleteDoc, where, doc, query, getDocs } from \"firebase/firestore\";\nimport Tasks from \"./task\";\nimport \"./dash.css\";\nimport { db } from \"../../firebase.js\";\nimport { useHistory, useParams } from \"react-router\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst deleteChangeHandler = async id => {\n  const docRef = doc(db, \"tasks\", id);\n  await deleteDoc(docRef); // INITIAL_TODO = INITIAL_TODO.filter((item) => item.task !== deleteTask);\n  // setNewTodo(INITIAL_TODO);\n};\n\nconst projdeleteChangeHandler = async id => {\n  const docRef = doc(db, \"projects\", id);\n  await deleteDoc(docRef); // INITIAL_TODO = INITIAL_TODO.filter((item) => item.task !== deleteTask);\n  // setNewTodo(INITIAL_TODO);\n};\n\nconst Project = () => {\n  _s();\n\n  const projdeleteHandler = () => {\n    projects.onDelete(projects.id);\n  }; // const [task, settask] = useState(\"\");\n\n\n  const [projcolor, setprojcolor] = useState(\"\");\n  const [tasks, settasks] = useState([]);\n  const taskInputRef = useRef < HTMlInputElement > null;\n  const taskCollectionRef = collection(db, \"tasks\"); // useEffect(\n  //   () =>\n  //     onSnapshot(collection(db, \"tasks\"), where(\"projid\", \"==\", id), function (\n  //       snapshot\n  //     ): void {\n  //       return settasks(\n  //         snapshot.docs.map((doc) => ({ ...doc.data(), id: doc.id }))\n  //       );\n  //     }),\n  //   []\n  // );\n\n  const [showActionSheet, setShowActionSheet] = useState(false);\n\n  const pushtask = async () => {\n    const msg = project === null || project === void 0 ? void 0 : project.color; // console.log(msg);\n\n    await addDoc(taskCollectionRef, {\n      task: task,\n      projid: id,\n      projcolor: msg\n    });\n  };\n\n  const [isOpen, setIsOpen] = useState(false);\n  const [projects, setProjects] = useState([]);\n  const params = useParams();\n  const id = params === null || params === void 0 ? void 0 : params.id;\n  const [project, setProject] = useState();\n\n  const myfun = async () => {\n    const docRef = await doc(db, \"projects\", id);\n    const docSnap = await getDoc(docRef);\n    setProject(docSnap.data());\n    console.log(id);\n    const q = query(collection(db, \"tasks\"), where(\"projid\", \"==\", id));\n    const querySnapshot = await getDocs(q);\n    console.log(\"mee\", tasks);\n    var myTasks = [];\n    querySnapshot.forEach(doc => {\n      // console.log(doc.id, \" => \", doc.data());\n      myTasks.push(doc.data());\n    });\n    settasks(myTasks);\n  };\n\n  console.log(tasks);\n\n  const deleteproj = async () => {\n    const docRef = doc(db, \"projects\", id);\n    await deleteDoc(docRef);\n    setProject(docSnap.data());\n  };\n\n  useEffect(() => {\n    myfun();\n  }, [id]); // console.log(project);\n  // console.log(\"id:\", id);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ion-padding\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"iontitle\",\n          children: project === null || project === void 0 ? void 0 : project.projtitle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Objectif :\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\" \", project === null || project === void 0 ? void 0 : project.des, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Task To Do\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: tasks.map(tasks => /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Tasks, {\n              id: tasks.id,\n              task: tasks.task,\n              projid: tasks.projid,\n              projcolor: tasks.projcolor,\n              onDelete: deleteChangeHandler\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 17\n            }, this)\n          }, tasks.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ion-padding\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Add task \", project === null || project === void 0 ? void 0 : project.color]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            position: \"floating\",\n            children: \"Task\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            ref: taskInputRef,\n            onIonChange: e => settask(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: pushtask,\n          className: \"ion-margin-top\",\n          expand: \"block\",\n          children: \"Add\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Project, \"Exapq/kVMpMuSd76GK43POK3Lss=\", false, function () {\n  return [useParams];\n});\n\n_c = Project;\nexport default Project;\n\nvar _c;\n\n$RefreshReg$(_c, \"Project\");","map":{"version":3,"names":["onSnapshot","collection","getDoc","addDoc","updateDoc","deleteDoc","where","doc","query","getDocs","Tasks","db","useHistory","useParams","deleteChangeHandler","id","docRef","projdeleteChangeHandler","Project","projdeleteHandler","projects","onDelete","projcolor","setprojcolor","useState","tasks","settasks","taskInputRef","useRef","HTMlInputElement","taskCollectionRef","showActionSheet","setShowActionSheet","pushtask","msg","project","color","task","projid","isOpen","setIsOpen","setProjects","params","setProject","myfun","docSnap","data","console","log","q","querySnapshot","myTasks","forEach","push","deleteproj","useEffect","projtitle","des","map","e","settask","target","value"],"sources":["/Users/igor/Documents/mage-template/src/layouts/dashboard/project.js"],"sourcesContent":["import {\n  onSnapshot,\n  collection,\n  getDoc,\n  addDoc,\n  updateDoc,\n  deleteDoc,\n  where,\n  doc,\n  query,\n  getDocs\n} from \"firebase/firestore\";\nimport Tasks from \"./task\";\nimport \"./dash.css\";\n\nimport { db } from \"../../firebase.js\";\nimport { useHistory, useParams } from \"react-router\";\n\n\n\n\nconst deleteChangeHandler = async (id: any) => {\n  const docRef = doc(db, \"tasks\", id);\n  await deleteDoc(docRef);\n  // INITIAL_TODO = INITIAL_TODO.filter((item) => item.task !== deleteTask);\n  // setNewTodo(INITIAL_TODO);\n};\nconst projdeleteChangeHandler = async (id: any) => {\n  const docRef = doc(db, \"projects\", id);\n  await deleteDoc(docRef);\n  // INITIAL_TODO = INITIAL_TODO.filter((item) => item.task !== deleteTask);\n  // setNewTodo(INITIAL_TODO);\n};\n\nconst Project: React.FC<{\n  onDelete: Function;\n}> = () => {\n  const projdeleteHandler = () => {\n    projects.onDelete(projects.id);\n  };\n\n  // const [task, settask] = useState(\"\");\n  const [projcolor, setprojcolor] = useState(\"\");\n\n  const [tasks, settasks] = useState([]);\n  const taskInputRef = useRef<HTMlInputElement>(null);\n  const taskCollectionRef = collection(db, \"tasks\");\n\n  // useEffect(\n  //   () =>\n  //     onSnapshot(collection(db, \"tasks\"), where(\"projid\", \"==\", id), function (\n  //       snapshot\n  //     ): void {\n  //       return settasks(\n  //         snapshot.docs.map((doc) => ({ ...doc.data(), id: doc.id }))\n  //       );\n  //     }),\n  //   []\n  // );\n  const [showActionSheet, setShowActionSheet] = useState(false);\n  const pushtask = async () => {\n\n\n    const msg = project?.color;\n    // console.log(msg);\n    await addDoc(taskCollectionRef, {\n      task: task,\n      projid: id,\n      projcolor: msg\n    });\n  };\n\n  const [isOpen, setIsOpen] = useState(false);\n  const [projects, setProjects] = useState([] );\n  const params = useParams();\n  const id = params?.id;\n\n  const [project, setProject] = useState();\n  const myfun = async () => {\n    const docRef = await doc(db, \"projects\", id);\n    const docSnap = await getDoc(docRef);\n    setProject(docSnap.data());\n    console.log(id);\n    const q = query(collection(db, \"tasks\"), where(\"projid\", \"==\", id));\n    const querySnapshot = await getDocs(q);\n    console.log(\"mee\", tasks);\n    var myTasks = [];\n    querySnapshot.forEach((doc) => {\n      // console.log(doc.id, \" => \", doc.data());\n      myTasks.push(doc.data());\n    });\n    settasks(myTasks);\n  };\n  console.log(tasks);\n  const deleteproj = async () => {\n    const docRef = doc(db, \"projects\", id);\n    await deleteDoc(docRef);\n    setProject(docSnap.data());\n  };\n\n  useEffect(() => {\n    myfun();\n  }, [id]);\n  // console.log(project);\n  // console.log(\"id:\", id);\n\n  return (\n    <div>\n      <div>\n        <div>\n\n\n\n        </div>\n      </div>\n\n\n      <div>\n        <br />\n\n        <div className=\"ion-padding\">\n          <h3 className=\"iontitle\">{project?.projtitle}</h3>\n          <br />\n          <label>Objectif :</label>\n          <br />\n          <br />\n          <p> {project?.des} </p>\n          <br />\n          <h4>Task To Do</h4>\n\n          <div>\n            {tasks.map((tasks: any) => (\n              <div key={tasks.id}>\n                <Tasks\n                  id={tasks.id}\n                  task={tasks.task}\n                  projid={tasks.projid}\n                  projcolor={tasks.projcolor}\n                  onDelete={deleteChangeHandler}\n                />\n              </div>\n            ))}\n          </div>\n        </div>\n\n\n\n          <div className=\"ion-padding\">\n            <h4>Add task {project?.color}</h4>\n            <div>\n              <label position=\"floating\">Task</label>\n              <input\n                ref={taskInputRef}\n                onIonChange={(e: any) => settask(e.target.value)}\n              />\n            </div>\n            <button\n              onClick={pushtask}\n              className=\"ion-margin-top\"\n              expand=\"block\"\n            >\n              Add\n            </button>\n          </div>\n\n      </div>\n    </div>\n  );\n};\n\nexport default Project;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}